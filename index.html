<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>PlayTogether Fish Tool</title>

<!-- Logo & Manifest -->
<link rel="icon" href="icons/icon-192.png" />
<link rel="apple-touch-icon" href="icons/icon-192.png" />
<link rel="manifest" href="manifest.json" />
<meta name="theme-color" content="#000000"/>

<style>
  body{background:#000;color:#39ff14;font-family:monospace;margin:0;padding:10px}
  h2{font-size:18px;text-align:center;margin:10px 0;color:#fff}
  button{display:block;margin:0 auto 15px auto;background:#000;border:1px solid #39ff14;
    color:#39ff14;padding:12px 20px;font-size:16px;border-radius:6px}
  .fish{border:1px solid #39ff14;margin:10px 0;padding:10px;border-radius:8px}
  .active{border-color:#fff;box-shadow:0 0 10px #39ff14}
  .title{color:#fff;font-weight:bold;font-size:16px;margin-bottom:5px}
  .row{margin:2px 0;font-size:14px}
  .pred{color:#9f9;margin-top:4px;font-size:13px}
</style>
</head>
<body>
<h2>ğŸ£ PlayTogether Fish Tool</h2>
<button id="btn">Gá»¢I Ã</button>
<div id="list"></div>

<script>
// ====== ÄÄƒng kÃ½ service worker (Ä‘á»ƒ thÃ nh PWA) ======
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('sw.js').then(() => {
    console.log("Service Worker registered");
  });
}

// ====== DATA & LOGIC ======
const fishData=[
  {name:'CÃ¡ táº§m',time:'Ban ngÃ y',minute:'',shadow:'4',loc:'Ao khu trung tÃ¢m'},
  {name:'CÃ¡ xiÃªm rá»“ng tráº¯ng',time:'Ban Ä‘Ãªm',minute:'',shadow:'1',loc:'ÄÃ i phun nÆ°á»›c Khu Trung tÃ¢m'},
  {name:'Sá»©a nomura',time:'Cáº£ ngÃ y',minute:'',shadow:'4',loc:'Táº¥t cáº£ cÃ¡c vÃ¹ng biá»ƒn'},
  {name:'ThiÃªn sá»© biá»ƒn',time:'Cáº£ ngÃ y',minute:'',shadow:'1',loc:'Biá»ƒn sÃ¢u'},
  {name:'CÃ¡ voi tráº¯ng',time:'Cáº£ ngÃ y',minute:'',shadow:'4',loc:'Biá»ƒn sÃ¢u'},
  {name:'Ká»³ lÃ¢n biá»ƒn',time:'Ban Ä‘Ãªm',minute:'55-07 | 25-37',shadow:'4',loc:'Biá»ƒn sÃ¢u'},
  {name:'Cua nhá»‡n',time:'Ban Ä‘Ãªm',minute:'55-07 | 25-37',shadow:'4',loc:'Biá»ƒn sÃ¢u'},
  {name:'TÃ´m hÃ¹m xanh',time:'Ban Ä‘Ãªm',minute:'',shadow:'2',loc:'Biá»ƒn sÃ¢u, Thuyá»n'},
  {name:'CÃ¡ voi sÃ¡t thá»§',time:'Ban Ä‘Ãªm',minute:'55-05 | 25-35',shadow:'5 (thÆ°á»ng)/1 (mini)',loc:'Biá»ƒn sÃ¢u, Thuyá»n'},
  {name:'CÃ¡ máº­p mÅ©i cÆ°a',time:'Ban Ä‘Ãªm',minute:'',shadow:'5 (thÆ°á»ng)/1 (mini)',loc:'Biá»ƒn sÃ¢u, Thuyá»n'},
  {name:'CÃ¡ nhÃ  tÃ¡ng',time:'Ban Ä‘Ãªm',minute:'00-05 | 30-35',shadow:'5 (thÆ°á»ng)/1 (mini)',loc:'Thuyá»n, Há»‘ Xanh'},
  {name:'CÃ¡ nhÃ¡m voi',time:'Ban Ä‘Ãªm',minute:'00-05 | 30-35',shadow:'5',loc:'Thuyá»n, Há»‘ Xanh'},
  {name:'CÃ¡ nhÃ¡m bÃºa',time:'Cáº£ ngÃ y',minute:'',shadow:'5 (thÆ°á»ng)/1 (mini)',loc:'Biá»ƒn sÃ¢u, Thuyá»n, Háº£i Ä‘Äƒng'},
  {name:'Háº£i cáº§u báº¯c cá»±c',time:'Cáº£ ngÃ y',minute:'00-05 | 30-35',shadow:'4',loc:'Háº£i Ä‘Äƒng, Há»‘ Xanh'},
  {name:'CÃ¡ voi xanh',time:'Ban ngÃ y',minute:'13-18 | 43-48',shadow:'5',loc:'Háº£i Ä‘Äƒng'},
  {name:'CÃ¡ heo khÃ´ng vÃ¢y',time:'Ban ngÃ y',minute:'',shadow:'4',loc:'Háº£i Ä‘Äƒng'},
  {name:'CÃ¡ heo há»“ng',time:'Ban ngÃ y',minute:'15-17 | 45-47',shadow:'5 (thÆ°á»ng)/1 (mini)',loc:'Trung tÃ¢m mua sáº¯m'},
  {name:'CÃ¡ cÃºi',time:'Ban ngÃ y',minute:'13-18 | 43-48',shadow:'4',loc:'Trung tÃ¢m mua sáº¯m'},
  {name:'Ká»³ nhÃ´ng Axolotl',time:'Ban ngÃ y',minute:'',shadow:'1',loc:'Trung tÃ¢m mua sáº¯m, Há»“ bÆ¡i trong nhÃ '},
  {name:'CÃ¡ há»•',time:'Ban ngÃ y',minute:'',shadow:'4',loc:'Trung tÃ¢m mua sáº¯m, Há»“ bÆ¡i trong nhÃ '},
  {name:'Chi háº£i tÆ°á»£ng',time:'Ban ngÃ y',minute:'08-24 | 38-54',shadow:'4',loc:'BÃ£i biá»ƒn'},
  {name:'Háº£i mÃ£',time:'Ban ngÃ y',minute:'08-24 | 38-54',shadow:'4',loc:'BÃ£i biá»ƒn'},
  {name:'RÃ¹a da',time:'Ban ngÃ y',minute:'08-24 | 38-54',shadow:'4',loc:'BÃ£i biá»ƒn'},
  {name:'RÃ¹a biá»ƒn',time:'Ban ngÃ y',minute:'10-20 | 40-50',shadow:'4',loc:'BÃ£i biá»ƒn'},
  {name:'CÃ¡ lÃ³c mÃ´i trá»',time:'Ban ngÃ y',minute:'',shadow:'4',loc:'Há»“ Khu Cáº¯m tráº¡i'},
  {name:'Ká»³ nhÃ´ng khá»•ng lá»“',time:'Ban Ä‘Ãªm',minute:'25-35 | 55-05',shadow:'3',loc:'Há»“ Khu Cáº¯m tráº¡i, ThÃ¡c nÆ°á»›c'},
  {name:'CÃ¡ sáº¥u mÃµm dÃ i',time:'Ban Ä‘Ãªm',minute:'25-35 | 55-05',shadow:'4',loc:'ThÃ¡c nÆ°á»›c'},
  {name:'CÃ¡ chiÃªn',time:'Ban Ä‘Ãªm',minute:'',shadow:'4',loc:'Há»“ Khu Cáº¯m tráº¡i, ThÃ¡c nÆ°á»›c'},
  {name:'CÃ¡ háº£i tÆ°á»£ng',time:'Cáº£ ngÃ y',minute:'',shadow:'4',loc:'Há»“ Khu Cáº¯m tráº¡i, ThÃ¡c nÆ°á»›c'},
  {name:'CÃ¡ máº­p Greenland',time:'Ban Ä‘Ãªm',minute:'',shadow:'5',loc:'Há»‘ xanh'},
  {name:'CÃ¡ máº­p yÃªu tinh',time:'Ban Ä‘Ãªm',minute:'30-35 | 00-05',shadow:'4',loc:'Há»‘ xanh'},
  {name:'CÃ¡ mÃ¡i chÃ¨o',time:'Ban Ä‘Ãªm',minute:'30-35 | 00-05',shadow:'5',loc:'Há»‘ xanh'},
  {name:'CÃ¡ nhÃ¡m mang xáº¿p',time:'Cáº£ ngÃ y',minute:'30-35 | 00-05',shadow:'4',loc:'Há»‘ xanh'},
  {name:'Má»±c khá»•ng lá»“',time:'Cáº£ ngÃ y',minute:'',shadow:'5',loc:'Há»‘ xanh'},
  {name:'CÃ¡ sáº¥u',time:'Cáº£ ngÃ y',minute:'20-30 | 55-05',shadow:'5 (thÆ°á»ng)/1 (mini)',loc:'Há»“ bÆ¡i trong nhÃ '},
  {name:'Baba',time:'Cáº£ ngÃ y',minute:'',shadow:'2',loc:'Ao, Há»“ bÆ¡i Khu Trung tÃ¢m'}
];

function predictRange(minuteStr){
  if(!minuteStr) return "---";
  return minuteStr.split('|').map(pair=>{
    let [a,b]=pair.trim().split('-').map(x=>parseInt(x));
    let na=(a+17)%60;
    let nb=(b+17)%60;
    return (na<10?"0"+na:na)+"-"+(nb<10?"0"+nb:nb);
  }).join(' | ');
}

function inDay(h){return h>=6&&h<18;}
function parseRanges(str){
  if(!str) return [];
  return str.split('|').map(s=>s.trim()).map(r=>{
    let [a,b]=r.split('-').map(x=>parseInt(x));
    return {a:a,b:b};
  });
}
function inRange(min,a,b){return a<=b?(min>=a&&min<=b):(min>=a||min<=b);}

document.getElementById("btn").onclick=function(){
  const now=new Date();
  const h=now.getHours(),m=now.getMinutes();
  const isDay=inDay(h);
  let arr=[];
  fishData.forEach(f=>{
    let active=false;
    let ranges=parseRanges(f.minute);
    if(ranges.length){
      active=ranges.some(r=>inRange(m,r.a,r.b));
    }
    if(f.time=="Ban ngÃ y"&&!isDay) active=false;
    if(f.time=="Ban Ä‘Ãªm"&&isDay) active=false;
    arr.push({...f,active});
  });
  arr.sort((a,b)=>b.active-a.active);
  const list=document.getElementById("list");
  list.innerHTML="";
  arr.forEach(f=>{
    const div=document.createElement("div");
    div.className="fish"+(f.active?" active":"");
    div.innerHTML=`
      <div class="title">${f.name}</div>
      <div class="row">â± Khung gá»‘c: ${f.minute||'---'}</div>
      <div class="row">ğŸ“… Khung dá»± Ä‘oÃ¡n: <span class="pred">${predictRange(f.minute)}</span></div>
      <div class="row">ğŸŒ/ğŸŒ™: ${f.time}</div>
      <div class="row">ğŸ“ Äá»‹a Ä‘iá»ƒm: ${f.loc}</div>
      <div class="row">ğŸ¯ BÃ³ng: ${f.shadow}</div>`;
    list.appendChild(div);
  });
}
</script>
</body>
</html>